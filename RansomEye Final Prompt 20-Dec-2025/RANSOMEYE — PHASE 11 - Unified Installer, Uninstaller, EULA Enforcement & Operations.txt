# âš™ï¸ RANSOMEYE â€” PHASE 11

## Unified Installer, Uninstaller, EULA Enforcement & Operations

### **(AUTHORITATIVE MASTER PROMPT â€“ PHASE 11)**

**Environment Root:** `/home/ransomeye/rebuild/`
**Phase Folder:** `/home/ransomeye/rebuild/ransomeye_installer/`

**Scope Note (STRICT):**
This phase applies to **ALL modules** via a **unified installer/uninstaller** **EXCEPT**:

* **DPI Probe** (stand-alone)
* **Linux Agent** (stand-alone)
* **Windows Agent** (stand-alone)

Those stand-alone modules have **their own installers** and are **explicitly excluded** from unified installer logic.

---

## CONTEXT (ENTERPRISE & LEGAL CRITICAL)

This phase determines whether RansomEye can be:

* Installed safely
* Operated in air-gapped environments
* Upgraded without outages
* Rolled back deterministically
* Uninstalled cleanly
* Legally distributed (EULA)

Any mistake here can:

* Brick hosts
* Violate license terms
* Break trust with customers
* Prevent rollback during incidents

---

## ğŸš¨ GLOBAL RULES (RE-ENFORCED)

All rules from **Phase 1â€“10** apply unchanged.

Additional Phase-11 rules below are **hard enforcement**.

---

## ğŸ¯ PHASE 11 OBJECTIVE

Build a **transactional, deterministic, legally enforced installer/uninstaller** that:

1. Enforces **explicit EULA acceptance**
2. Performs **preflight validation**
3. Creates and validates **SWAP** (Core & DPI only)
4. Installs all **non-stand-alone modules**
5. Verifies **signatures & integrity**
6. Supports **upgrade, rollback, uninstall**
7. Works **offline / air-gapped**
8. Centralizes **systemd units**
9. Leaves system safe on failure

---

## ğŸ“¦ INSTALLER RESPONSIBILITIES (STRICT)

### MUST DO

* Display and require EULA acceptance
* Validate environment before install
* Verify signatures for every artifact
* Enforce version compatibility
* Perform atomic installs
* Create/verify swap (Core only here)
* Support rollback on failure
* Log deterministically

### MUST NEVER DO

* Assume internet access
* Modify OS security silently
* Proceed on validation failure
* Leave partial installs
* Skip EULA
* Install stand-alone modules

---

## ğŸ“ PHASE 11 DIRECTORY STRUCTURE (MANDATORY)

Create exactly:

```
/home/ransomeye/rebuild/ransomeye_installer/
```

```
ransomeye_installer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ eula.rs
â”‚   â”œâ”€â”€ preflight.rs
â”‚   â”œâ”€â”€ verify.rs
â”‚   â”œâ”€â”€ install.rs
â”‚   â”œâ”€â”€ upgrade.rs
â”‚   â”œâ”€â”€ rollback.rs
â”‚   â”œâ”€â”€ uninstall.rs
â”‚   â”œâ”€â”€ swap.rs
â”‚   â””â”€â”€ logging.rs
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ ingestion/
â”‚   â”œâ”€â”€ policy/
â”‚   â”œâ”€â”€ dispatcher/
â”‚   â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ reporting/
â”‚   â””â”€â”€ intelligence/
â”‚
â”œâ”€â”€ systemd/
â”‚   â”œâ”€â”€ ransomeye-core.service
â”‚   â”œâ”€â”€ ransomeye-ingestion.service
â”‚   â”œâ”€â”€ ransomeye-policy.service
â”‚   â”œâ”€â”€ ransomeye-dispatcher.service
â”‚   â”œâ”€â”€ ransomeye-ai.service
â”‚   â””â”€â”€ ransomeye-reporting.service
â”‚
â”œâ”€â”€ eula/
â”‚   â””â”€â”€ EULA.txt   # EMPTY FILE â€” MUST EXIST & BE ACCEPTED
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ install_schema.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ install.sh
â”‚   â”œâ”€â”€ upgrade.sh
â”‚   â”œâ”€â”€ rollback.sh
â”‚   â”œâ”€â”€ uninstall.sh
â”‚   â””â”€â”€ verify.sh
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ installation_guide.md
â”‚   â”œâ”€â”€ upgrade_guide.md
â”‚   â”œâ”€â”€ rollback_guide.md
â”‚   â”œâ”€â”€ uninstall_guide.md
â”‚   â”œâ”€â”€ airgap_guide.md
â”‚   â””â”€â”€ failure_modes.md
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ preflight_tests.rs
    â”œâ”€â”€ eula_enforcement_tests.rs
    â”œâ”€â”€ swap_creation_tests.rs
    â”œâ”€â”€ upgrade_failure_tests.rs
    â”œâ”€â”€ rollback_tests.rs
    â””â”€â”€ uninstall_tests.rs
```

---

## ğŸ“œ EULA ENFORCEMENT (MANDATORY, NON-NEGOTIABLE)

Rules:

* EULA file path is fixed:

  ```
  /home/ransomeye/rebuild/ransomeye_installer/eula/EULA.txt
  ```
* Installer MUST:

  * Display EULA
  * Require explicit acceptance (yes/no)
  * Record acceptance (timestamp, user, host)
* No acceptance â†’ **ABORT INSTALL**
* Acceptance must be auditable

No silent installs.

---

## ğŸ” PREFLIGHT VALIDATION (MANDATORY)

You MUST validate:

* OS compatibility
* Kernel features
* Disk space
* Memory availability
* Required capabilities
* Conflicting services
* Existing versions
* Architecture compatibility

Any failure â†’ **ABORT**

---

## ğŸ’¾ SWAP MANAGEMENT (MANDATORY)

### Applies ONLY to:

* **Core Engine**
* **DPI Probe** (handled by DPI installer; unified installer validates Core only)

Rules for Core:

* Minimum SWAP: **16 GB**
* OR **equal to physical RAM**, whichever is higher
* Create swap file deterministically
* Persist across reboot
* Verify at startup

Failure â†’ **ABORT INSTALL**

Explicitly forbidden for:

* Linux Agent
* Windows Agent

---

## ğŸ” SECURITY & INTEGRITY (MANDATORY)

Installer MUST:

* Verify signatures for every package
* Verify checksums
* Validate trust chain
* Reject unsigned or modified artifacts

Any failure â†’ **ABORT**

---

## ğŸ”„ UPGRADE & ROLLBACK (TRANSACTIONAL)

You MUST implement:

* Rolling upgrades (where applicable)
* Mixed-version compatibility checks
* Config migration with backup
* Automatic rollback on failure

Rollback MUST:

* Restore binaries
* Restore configs
* Restore services
* Leave system operational

---

## ğŸ§¹ UNINSTALL (CLEAN & SAFE)

Uninstall MUST:

* Stop services
* Remove binaries
* Preserve logs (optional, configurable)
* Remove swap ONLY if created by installer
* Leave OS unchanged otherwise

No orphaned services.

---

## ğŸ’¥ FAILURE MODES (MANDATORY)

Define explicit behavior for:

* Power loss mid-install
* Disk full mid-install
* Invalid EULA
* Signature failure
* Version mismatch
* Partial upgrade

System must always be recoverable.

---

## ğŸ§ª VALIDATION REQUIREMENTS

You MUST include tests that:

* Enforce EULA acceptance
* Verify swap creation
* Simulate upgrade failures
* Verify rollback correctness
* Validate uninstall safety
* Validate air-gapped install

---

## ğŸ›‘ FAILURE CONDITIONS (HARD)

Phase 11 is INVALID if:

* EULA can be bypassed
* Swap is optional for Core
* Partial installs persist
* Rollback is best-effort
* Stand-alone modules are installed here

---

## FINAL INSTRUCTION

Treat Phase 11 as:

* A **legal gate**
* An **operational safety system**
* A **transaction manager**

If Phase 11 fails, **enterprises will not trust deployment**.

**BUILD PHASE 11 COMPLETELY, EXPLICITLY, AND WITHOUT ASSUMPTIONS.**

---
