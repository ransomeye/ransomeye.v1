# ğŸ§© RANSOMEYE â€” PHASE 2

## System Architecture, Trust Boundaries & Data-Plane Separation

### **(AUTHORITATIVE MASTER PROMPT â€“ PHASE 2)**

**Environment Root:** `/home/ransomeye/rebuild/`
**Phase Folder:** `/home/ransomeye/rebuild/ransomeye_architecture/`

---

## CONTEXT (NON-NEGOTIABLE)

You are defining the **foundational architecture** of RansomEye.

This phase establishes:

* **Hard trust boundaries**
* **Data-plane vs control-plane separation**
* **Zero-trust assumptions**
* **Blast-radius containment**
* **Where AI/ML/LLM are allowed â€” and forbidden**

If this phase is wrong:

* DPI compromises Core
* Agents escalate privilege
* AI influences enforcement
* Scale claims collapse
* Military-grade posture is impossible

**This phase is purely architectural + enforcement primitives.
NO business logic, NO detection logic, NO policy logic.**

---

## ğŸš¨ GLOBAL RULES (RE-ENFORCED)

All rules from **Phase 1** apply **unchanged**.

Additional Phase-2-specific rules below **must be enforced by code**.

---

## ğŸ¯ PHASE 2 OBJECTIVE

Define and codify a **strict, provable, enforceable system architecture** that:

1. Clearly separates:

   * Data Plane
   * Control Plane
   * Intelligence Plane
   * Management Plane
2. Enforces **one-way trust flows**
3. Prevents **implicit coupling**
4. Ensures **DPI, Agents, Core, AI, LLM** cannot violate role boundaries
5. Guarantees **Day-1 AI readiness without enforcement authority**

---

## ğŸ§  ARCHITECTURAL PLANES (MANDATORY)

You MUST define **exactly these planes** and **no others**.

### 1. Data Plane (Untrusted Input Plane)

Components:

* DPI Probe (stand-alone)
* Linux Agent (stand-alone)
* Windows Agent (stand-alone)

Properties:

* High-volume
* Potentially hostile
* Never authoritative
* Never stateful long-term
* Never enforces policy

---

### 2. Control Plane (Authoritative Decision Plane)

Components:

* Core Correlation Engine
* Policy Engine
* Enforcement Dispatcher

Properties:

* Deterministic
* Fail-closed
* Fully signed inputs only
* No AI dependency
* Enforces policy

---

### 3. Intelligence Plane (Advisory Only)

Components:

* AI / ML Models
* Baseline Intelligence Pack
* Explainability (SHAP)
* Threat Intelligence Fusion
* LLM SOC Copilot

Properties:

* Fully trained Day-1
* Read-only inputs
* Advisory outputs only
* Never blocks
* Never enforces
* Never modifies state

---

### 4. Management Plane (Human Interface)

Components:

* UI
* Reporting
* Forensics
* Installer / Upgrader
* Audit & Compliance

Properties:

* Authenticated humans
* Audited actions
* Two-person integrity for critical ops
* No direct data-plane access

---

## ğŸ“ PHASE 2 DIRECTORY STRUCTURE (MANDATORY)

Create exactly:

```
/home/ransomeye/rebuild/ransomeye_architecture/
```

```
ransomeye_architecture/
â”œâ”€â”€ planes/
â”‚   â”œâ”€â”€ data_plane.md
â”‚   â”œâ”€â”€ control_plane.md
â”‚   â”œâ”€â”€ intelligence_plane.md
â”‚   â””â”€â”€ management_plane.md
â”‚
â”œâ”€â”€ trust/
â”‚   â”œâ”€â”€ trust_boundaries.md
â”‚   â”œâ”€â”€ trust_flow_diagrams.md
â”‚   â”œâ”€â”€ forbidden_flows.md
â”‚   â””â”€â”€ compromise_containment.md
â”‚
â”œâ”€â”€ identity/
â”‚   â”œâ”€â”€ component_identity.md
â”‚   â”œâ”€â”€ signing_model.md
â”‚   â”œâ”€â”€ verification_rules.md
â”‚   â””â”€â”€ revocation.md
â”‚
â”œâ”€â”€ data_contracts/
â”‚   â”œâ”€â”€ dpi_to_core.md
â”‚   â”œâ”€â”€ agent_to_core.md
â”‚   â”œâ”€â”€ core_to_ai.md
â”‚   â”œâ”€â”€ ai_to_human.md
â”‚   â””â”€â”€ enforcement_dispatch.md
â”‚
â”œâ”€â”€ swap_policy/
â”‚   â”œâ”€â”€ swap_requirements.md
â”‚   â””â”€â”€ enforcement_rules.md
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture_overview.md
â”‚   â”œâ”€â”€ zero_trust_model.md
â”‚   â”œâ”€â”€ day1_readiness.md
â”‚   â””â”€â”€ military_assumptions.md
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ forbidden_flow_tests.rs
    â”œâ”€â”€ identity_violation_tests.rs
    â”œâ”€â”€ ai_authority_violation_tests.rs
    â””â”€â”€ plane_isolation_tests.rs
```

Every document must define:

* What is allowed
* What is forbidden
* What happens on violation

---

## ğŸ” TRUST & IDENTITY MODEL (MANDATORY)

You MUST define:

* Unique cryptographic identity per component:

  * DPI Probe
  * Linux Agent
  * Windows Agent
  * Core Engine
  * AI Engine
  * LLM Engine
* Mutual authentication everywhere
* Explicit trust chains
* Revocation lists
* Identity expiration

**No shared secrets.
No implicit trust.**

---

## ğŸ” DATA FLOW RULES (HARD)

### Allowed (One-Way Only)

* DPI â†’ Core
* Agent â†’ Core
* Core â†’ Policy â†’ Enforcement
* Core â†’ AI (read-only)
* AI â†’ Human (advisory)

### Forbidden (Must Be Enforced)

* AI â†’ Core
* LLM â†’ Core
* DPI â†’ Policy
* Agent â†’ Policy
* Human â†’ Data Plane
* Human â†’ AI training without approval

Violation = **runtime termination + audit log**

---

## ğŸ§  AI / ML / LLM â€” ARCHITECTURAL CONSTRAINTS

You MUST explicitly define:

* AI has **zero enforcement authority**
* AI outputs are advisory
* AI confidence thresholds
* AI suppression rules
* AI baseline verification on startup
* AI shutdown behavior if baseline invalid

This MUST be documented in:

```
day1_readiness.md
```

---

## ğŸ§¾ DATA CONTRACT ENFORCEMENT

For every interface, define:

* Schema
* Versioning
* Signing requirements
* Size limits
* Rate limits
* Rejection behavior

No schema evolution without version bump.

---

## ğŸ’¾ SWAP MEMORY POLICY (MANDATORY FIX)

You MUST define and enforce:

### Applicable ONLY to:

* Core Engine machines
* DPI Probe machines

Rules:

* Minimum SWAP: **16 GB**
* OR **equal to physical RAM**, whichever is higher
* Automatically created during install
* Verified at startup
* Missing SWAP â†’ **FAIL STARTUP**

Explicitly forbidden for:

* Linux Agent
* Windows Agent

Document and enforce in:

```
swap_policy/
```

---

## ğŸ§ª VALIDATION REQUIREMENTS

You MUST implement tests that:

* Reject forbidden trust flows
* Reject AI authority violations
* Reject unsigned data
* Reject missing swap on Core/DPI
* Reject identity misuse

---

## ğŸ›‘ FAILURE CONDITIONS (HARD)

Phase 2 is INVALID if:

* Trust boundaries are implicit
* AI can influence enforcement
* Planes are blurred
* Swap policy is undocumented or unenforced
* Data flow rules are advisory instead of enforced

---

## FINAL INSTRUCTION

Treat Phase 2 as:

* A **battlefield topology**
* A **blast-radius map**
* A **zero-trust contract**

If Phase 2 is violated anywhere later, **that module is invalid**.

**BUILD PHASE 2 COMPLETELY, EXPLICITLY, AND WITHOUT ASSUMPTIONS.**

---
